<!DOCTYPE html>
<html>

<head>
  <title>SignalWire CF Client Beta</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

  <script type="text/javascript" src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="#">SignalWire CF Client Beta</a>
      <ul class="navbar-nav">
        <li class="nav-item active">
          <a class="nav-link" href="/">Full</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/minimal">Minimal</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/oauth">Subscriber OAuth</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/subscriber">Subscriber Signin/Signup</a>
        </li>
      </ul>
    </div>
  </nav>

  <div class="container">
    <div class="row"></div>
    <div class="col-3">
      <label for="destination" class="form-label">Destination</label>
      <input type="text" id="destination" class="form-control" value="<%= destination %>">
      <button class="btn btn-primary" onclick="makeCall();">Call</button>
      <div class="card mt-2">
        <div class="d-grid gap-2">
          <a id="btnRegister" class="btn btn-success" href="/minimal?inbound">
            Register
          </a>
        </div>
      </div>
    </div>
    <div class="row-9">
      <div id="rootElement"></div>
    </div>
  </div>
  </div>

  <script type="module">
    // Import Firebase libs
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js'
    import { getMessaging, getToken, onMessage } from 'https://www.gstatic.com/firebasejs/10.4.0/firebase-messaging.js'

    window.FB = {
      initializeApp,
      getMessaging,
      getToken,
      onMessage,
    }
  </script>
  <script type="text/javascript">
    const _token = "<%= token %>";
    const _host = "<%= host %>";
    const _fabricApiUrl = "<%= fabricApiUrl %>";
    const _firebaseConfig = <%- firebaseConfig %>;
  </script>
  <script type="text/javascript" src="https://unpkg.com/@signalwire/js@dev"></script>
  <script type="text/javascript" src="/minimal.js"></script>
</body>

</html>
